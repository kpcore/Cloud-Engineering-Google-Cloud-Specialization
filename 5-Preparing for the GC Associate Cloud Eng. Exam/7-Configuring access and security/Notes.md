## 1. Managing Identity and Access Management

* Welcome back to preparing for the associate cloud engineer exam. In this module, we'll discuss how to configure your cloud solution access and security. Our first section concerns managing identity and access management, also known as IAM. Tasks we'll cover in this section include viewing and assigning IAM roles to accounts or Google groups. First, let's review some basic information about cloud IAM. Access is granted to members which can be a Google account representing a developer, administrator, or any other person who interacts with DCP. A service account, which is an account that belongs to your application, is seven individual end user. A Google group, which is a named collection of Google accounts and service accounts, and each has a unique email address associated with that group. A G Suite domain representing a virtual group of all the Google accounts have been created in an organization's G Suit account, Or a cloud identity domain. Which is like a G Suit domain because it represents a virtual group of all Google accounts in an organization. However, Cloud Identity domain users don't have access to these three applications and features. To view IAMs, open the IAM page in the GCC console, click Select a Project, and then click Open. The page will then display a list of members of the project and their roles.

## 2. Defining custom IAM roles

* Next, let's have a look at custom roles in IAM. In addition to the pre-defined roles, Cloud IAM provides the ability to create customized Cloud IAM roles. To create a custom role, you need to know what permissions are available for the resource you wish to grant them on. You can use this information to create a custom Cloud IAM role with one or more permissions. And then grant that custom role to users who are part of your organization. Role metadata is how you find out what permissions can be granted. It can be found by using the Google Cloud platform console or the IAM API. Once you've decided what to call your role and what permissions to give it, creating the role and adding permissions is fairly simple as long as you have the iam.roles.create permission on your user account or role. You can also create a custom role using the curated role as it's base. This means you'd take a role that is similar to one you need to create. And then add or remove permissions from a copy of that role until it meets your needs exactly. We'll create a custom role in the next demo.

## 3. Managing service accounts

* Our next the same guide session is managing service accounts. We'll now discuss managing these special counsel limited scopes. First let's go over what a service account is. A service account is a special Google account that belongs to your application or a VM and is set up to an individual end user. Your application uses the service account to call the Google API of a service so that the users aren't directly involved. For example, a compute engine VM may run as a service account, and that account can be given permissions to access resources it needs. This way the service account is the identity of the service, and the service account's permissions control which resources the service can access. A service account is identified by its email address, which is unique to the account. Access scopes are the legacy method of specifying permissions for your VM. Before these systems of IM roles, action scopes were the only mechanism for granting permissions to service accounts. Although they aren't the primary way of granting permissions now, you must still set access scopes when configuring an instance to run as a service account. In addition the permissions granted in the role with the scope must agree. If they don't, the service account won't be able to perform the function you need it to. The scope consists of the base URL up to the auth section plus the specific permission being granted, as shown in the example here. Scope can also be set on the command line using set scopes with the GCloud command. A VMs instance can only perform operations that are allowed by the roles assigned to the service account and the scopes that have been defined on the instance. And those permissions cannot contradict. For example, if a role only grants view access to our resource but a scope allows edit access, then the instance will not be able to edit that resource. To enable edit access to the resource, the role would need to be modified so that it agreed with the permissions granted in the scope. In other words, it would need to be changed to allow editing. If you need to change access scopes on an instance, you'll need to stop that instance first and then restart it for the changes to take effect. You can grant different groups of VMs in your project different identities. This makes it easier to manage different permissions for each group. You can also change the permissions of the service accounts without having to recreate the VMs. In the examples seen here, VMs running component 1 are granted editor access to project_b using Service Account 1. VMs running component_2 are granted objectViewer access to bucket_1 using Service Account 2. Service account permissions can also be changed without recreating VMs. Here's a more complex example. Say you have an application that's implemented across a group of compute engine virtual machines. One component of your application needs to have an editor role on another project, but another component doesn't. You would need to create two different service accounts, one for each sub group of virtual machines. Only the first service account has privilege on the other project. That reduces the potential impact of a miscoded application or a compromised virtual machine. Now, let's look at how you can assign and grant access to a service account in the same project or a different project. If you want to run the VM as a different identity, or you determine that the instance needs a different set of scopes to call the required API's. You can change the service account and the access scopes of an existing instance. For example, you can change access scopes or grant access to a new API or change an instance so that it runs as a service account that you created instead of the compute engine default service account. To change an instance's service account and access scopes, the instance must be temporarily stopped. To stop the instance, read the documentation for stopping instances. After changing the service account or access scopes, remember to restart the instance. You'll now gain some hands on experience managing and using service accounts in the next lab.

## 4. Viewing audit logs for projects and services

* Lastly, let's have a look at using audit logs for projects and manage services. Audit logs are very valuable resources for managing security and maintaining your Cloud services. Cloud audit logging means has three audit logs for each project folder and organization: Admin activity, system event, and data access. Google Cloud platform services right audit log entries to these logs to help you answer the questions of who did what? Where? And when? Within your GCP projects. These logs contain the following information,. Resource. Each audit log entry includes a resources some type. For example, you can view audit log entries from a seal Compute VM instance or from VM instance's. Service. Services are individual GCP products. Such as Compute engine, Cloud SQL or Cloud Pub Sub. Each service is identified by name. Compute engine is compute.googleapis.com. Cloud SQL is Cloud SQL.googleapis.com and so-forth. How audit logs can be viewed through the sacked ever interface from the main Console menu? The view audit logs on a VM instance within a project, navigate to the Stackdriver section of the main Console menu. You'll see options for Stackdriver components listed under the main heading. Choose Logging and then Logs if you'd log entries for instance. You can view abbreviated project level audit logs and your projects activity page in the GCP console. Navigate to the Home, activity page, and then you filter to select the entries you want to see. As mentioned, these entries are abbreviated. So the actual audit log entries might contain more information than you see in the activity page.

## 5. Resource links for Module 5

Google Cloud IAM:  https://cloud.google.com/iam/docs/

Security and Identity Fundamentals Quest:  https://www.qwiklabs.com/quests/40

Cloud IAM Overview:  https://cloud.google.com/iam/docs/overview

Understanding IAM roles:  https://cloud.google.com/iam/docs/understanding-roles

Understanding Custom IAM roles:  https://cloud.google.com/iam/docs/understanding-custom-roles

Granting or changing access in IAM:  https://cloud.google.com/iam/docs/granting-changing-revoking-access

Understanding Service Accounts:  https://cloud.google.com/iam/docs/understanding-service-accounts

Service Accounts:  https://cloud.google.com/iam/docs/service-accounts

Cloud Audit Logging overview: https://cloud.google.com/logging/docs/audit/

Services that product Audit Logs:  https://cloud.google.com/logging/docs/audit/#services
  